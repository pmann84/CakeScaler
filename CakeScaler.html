<html>
    <head>
        <style>
            @import url('https://fonts.googleapis.com/css?family=Open+Sans');
             * {
                 font-size: 100%;
                 font-family: Open Sans;
             }
        </style>
        <script type="text/javascript">
			function calculateCircluarTinVolume(diameter, height) {
                return 3.14159 * diameter * diameter * height * 0.25;
            }
			function calculateRectangularTinVolume(width, breadth, height) {
				return width * breadth * height;
			}
            function calculateTargetVolume(type) {
				if (type == "square") {
					var stw = document.getElementById("stw").value;
					var stb = document.getElementById("stb").value;
					var sth = document.getElementById("sth").value;
					return calculateRectangularTinVolume(stw, stb, sth);
				}
				else
				{
					var rtd = document.getElementById("rtd").value;
					var rth = document.getElementById("rth").value;
					return calculateCircluarTinVolume(rtd, rth);
				}
            }			
            function calculateDestinationVolume(type) {
				if (type == "square") {
					var sdw = document.getElementById("sdw").value;
					var sdb = document.getElementById("sdb").value;
					var sdh = document.getElementById("sdh").value;
					return calculateRectangularTinVolume(sdw, sdb, sdh);
				}
				else
				{
					var rdd = document.getElementById("rdd").value;
					var rdh = document.getElementById("rdh").value;
					return calculateCircluarTinVolume(rdd, rdh);
				}
            }
            function calculateVolumeRatio() {
                return (calculateDestinationVolume(getTinType()) / calculateTargetVolume(getTinType()));
            }
            function populateTargetVolume() {
				var tinType = getTinType();
				if (tinType == "square") {
					targetVolElement = document.getElementById("stv")
				}
				else {
					targetVolElement = document.getElementById("rtv")
				}
                targetVolElement.innerHTML = calculateTargetVolume(tinType).toFixed(2);
            }
            function populateDestVolume() {
				var tinType = getTinType();
				if (tinType == "square") {
					destVolElement = document.getElementById("sdv")
				}
				else {
					destVolElement = document.getElementById("rdv")
				}
				var destVol = calculateDestinationVolume(tinType).toFixed(2);
                destVolElement.innerHTML = destVol;
            }
            function populateVolumeRatio() {
                document.getElementById("vr").innerHTML = calculateVolumeRatio().toFixed(2);
            }
            function populateScaledValues() {
                document.getElementById("fSugar").innerHTML = Math.round(calculateVolumeRatio()*document.getElementById("iSugar").value);
                document.getElementById("fButter").innerHTML = Math.round(calculateVolumeRatio() * document.getElementById("iButter").value);
                document.getElementById("fFlour").innerHTML = Math.round(calculateVolumeRatio() * document.getElementById("iFlour").value);
                document.getElementById("fBpowder").innerHTML = Math.round(calculateVolumeRatio() * document.getElementById("iBpowder").value);
                document.getElementById("fEggs").innerHTML = (calculateVolumeRatio() * document.getElementById("iEggs").value).toFixed(2);
            }
            function calculate() {
                populateTargetVolume();
                populateDestVolume();
                populateVolumeRatio();
                populateScaledValues();
            }
			function toggleSquareTinElements(show) {
				if (show == true) {
					displayStyle = 'block';
				}
				else {
					displayStyle = 'none';
				}
				var squareHeader = document.getElementById('squareHead');
				squareHeader.style.display = displayStyle;
				var squareTable = document.getElementById('squareTable');
				squareTable.style.display = displayStyle;
			}
			function toggleRoundTinElements(show) {
				if (show == true) {
					displayStyle = 'block';
				}
				else {
					displayStyle = 'none';
				}
				var roundHeader = document.getElementById('roundHead');
				roundHeader.style.display = displayStyle;
				var roundTable = document.getElementById('roundTable');
				roundTable.style.display = displayStyle;
			}
			function updateDimensions(element) {
				if (element.value == "square")
				{
					toggleSquareTinElements(true);
					toggleRoundTinElements(false);
				}
				else
				{
					toggleSquareTinElements(false);
					toggleRoundTinElements(true);
				}
			}
			function getTinType() {
				var tinTypeElement = document.getElementById('tinType');
				var tinType = tinTypeElement.options[tinTypeElement.selectedIndex].value;
				return tinType;
			}
			window.onload = function() {
				var tinTypeElement = document.getElementById('tinType');
				updateDimensions(tinTypeElement);
			};
        </script>
        <title>Cake Scaler</title>
    </head>
    <body>
        Input the ingredient quantities that you have for your "target" tin. <br />
        Then input the diameter and height of the tin you use for that recipe. <br />
        Then input the diameter and height of the tin for which you wish to calculate quantites. <br />
        Hit Calculate! <br/>

        <h1>Ingredient Quantities</h1>
        <table>
            <tr>
                <td align="right">Butter (g):</td>
                <td><input type="text" id="iButter" value="200"/></td>
            </tr>
            <tr>
                <td align="right">Sugar (g):</td>
                <td><input type="text" id="iSugar" value="200"/></td>
            </tr>
            <tr>
                <td align="right">Flour (g):</td>
                <td><input type="text" id="iFlour" value="200"/></td>
            </tr>
            <tr>
                <td align="right">Baking Powder (g):</td>
                <td><input type="text" id="iBpowder" value="10"/></td>
            </tr>
            <tr>
                <td align="right">Eggs:</td>
                <td><input type="text" id="iEggs" value="4"/></td>
            </tr>
        </table>

		<h1>Tin Type</h1>
		        <table>
            <tr>
                <td align="right">Tin Shape:</td>
                <td>
					<select id="tinType" onChange="updateDimensions(this)">
						<option value="round">Round</option>
						<option value="square">Square</option>
					</select>
				</td>
            </tr>
        </table>
		
        <h1 id="roundHead" >Round Tin Dimensions</h1>
        <table id="roundTable">
            <tr>
                <td align="right">Target Tin Diameter (cm):</td>
                <td><input type="text" id="rtd" value="20"/></td>
                <td align="right">Target Tin Height (cm):</td>
                <td><input type="text" id="rth" value="4"/></td>
            </tr>
            <tr>
                <td align="right">Destination Tin Diameter (cm):</td>
                <td><input type="text" id="rdd" value="25"/></td>
                <td align="right">Destination Tin Height (cm):</td>
                <td><input type="text" id="rdh" value="4"/></td>
            </tr>
            <tr>
                <td align="right">Target Tin Volume (ml):</td>
                <td><label id="rtv"></label></td>
                <td align="right"> Destination Tin Volume (ml):</td>
                <td><label id="rdv"></label><td>
            </tr>
        </table>
		
		<h1 id="squareHead" >Square Tin Dimensions</h1>
        <table id="squareTable">
            <tr>
                <td align="right">Target Tin Width (cm):</td>
                <td><input type="text" id="stw" value="20"/></td>
				<td align="right">Target Tin Breadth (cm):</td>
                <td><input type="text" id="stb" value="20"/></td>
                <td align="right">Target Tin Height (cm):</td>
                <td><input type="text" id="sth" value="4"/></td>
            </tr>
            <tr>
                <td align="right">Desination Tin Width (cm):</td>
                <td><input type="text" id="sdw" value="25"/></td>
				<td align="right">Desination Tin Breadth (cm):</td>
                <td><input type="text" id="sdb" value="25"/></td>
                <td align="right">Desination Tin Height (cm):</td>
                <td><input type="text" id="sdh" value="4"/></td>
            </tr>
            <tr>
                <td align="right">Target Tin Volume (ml):</td>
                <td><label id="stv"></label></td>
                <td align="right"> Destination Tin Volume (ml):</td>
                <td><label id="sdv"></label><td>
            </tr>
        </table>

        <h1>Scaled Quantities</h1>
        <table>
            <tr>
                <td align="right">Volume Ratio:</td>
                <td><label id="vr"></label></td>
            </tr>
            <tr>
                <td align="right">Butter (g):</td>
                <td><label id="fButter"></label></td>
            </tr>
            <tr>
                <td align="right">Sugar (g):</td>
                <td><label id="fSugar"></label></td>
            </tr>
            <tr>
                <td align="right">Flour (g):</td>
                <td><label id="fFlour"></label></td>
            </tr>
            <tr>
                <td align="right">Baking Powder (g):</td>
                <td><label id="fBpowder"></label></td>
            </tr>
            <tr>
                <td align="right">Eggs:</td>
                <td><label id="fEggs"></label></td>
            </tr>
        </table>
        <br/>
        <button onclick="calculate()">Calculate!</button>
    </body>
</html>